<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>密钥生成器</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f8ff; /* 浅蓝色背景 */
            color: #333; /* 深灰色文字 */
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 600px;
            margin: 50px auto; /* 上下外边距50px，左右自动居中 */
            padding: 20px;
            background-color: #fff; /* 白色背景 */
            border-radius: 8px; /* 圆角边框 */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* 阴影效果 */
            text-align: center;
        }
        h1 {
            font-size: 2rem; /* 标题字体大小 */
            color: #4CAF50; /* 绿色标题 */
            margin-bottom: 20px;
        }
        p {
            font-size: 1rem; /* 段落字体大小 */
            margin-bottom: 20px;
        }
        button {
            padding: 12px 24px; /* 按钮内边距 */
            font-size: 1rem; /* 按钮字体大小 */
            background-color: #4CAF50; /* 绿色按钮 */
            color: #fff; /* 白色文字 */
            border: none;
            border-radius: 4px; /* 圆角按钮 */
            cursor: pointer; /* 鼠标悬停时显示手型 */
            transition: background-color 0.3s ease; /* 背景颜色过渡效果 */
        }
        button:hover {
            background-color: #45a049; /* 鼠标悬停时的按钮颜色 */
        }
        pre {
            background-color: #f4f4f4; /* 浅灰色背景 */
            padding: 15px;
            border: 1px solid #ddd; /* 浅灰色边框 */
            border-radius: 4px; /* 圆角边框 */
            margin-top: 20px;
            white-space: pre-wrap;
            font-size: 1rem; /* 字体大小 */
            color: #333; /* 深灰色文字 */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>密钥生成器</h1>
        <p>点击按钮生成密钥</p>
        <button onclick="generateAndEncrypt()">生成密钥</button>
        <pre id="output"></pre>
    </div>

    <script>
        // 原始的 generateKey 函数
        function generateKey(_) {
            const { java, source } = _ || this;
            let now = new Date();
            let year = now.getFullYear();
            let month = String(now.getMonth() + 1).padStart(2, '0');
            let day = String(now.getDate()).padStart(2, '0');
            return `${year}${month}${day}`;
        }

        // 简化的 Base64 加密函数
        function simpleBase64Encrypt(value) {
            // 添加固定长度的随机字符串（8位）
            const randomString = Math.random().toString(36).substring(2, 10);
            const combinedString = randomString + value;
            // Base64 编码
            return btoa(combinedString);
        }

        // 在编码后的字符串末尾添加固定长度的随机字符串（4位）
        function appendRandomSuffix(encodedString) {
            const randomSuffix = Math.random().toString(36).substring(2, 6);
            return encodedString + randomSuffix;
        }

        // 主函数：生成并加密
        function generateAndEncrypt() {
            const key = generateKey();
            const encryptedKey = simpleBase64Encrypt(key);
            const finalKey = appendRandomSuffix(encryptedKey);
            document.getElementById('output').textContent = `密钥：\n${finalKey}`;
        }
    </script>
</body>
</html>
